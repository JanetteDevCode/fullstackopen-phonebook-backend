{"version":3,"sources":["components/PersonForm.js","components/Person.js","components/Persons.js","components/Filter.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["PersonForm","props","onSubmit","handleAddPerson","placeholder","value","newName","onChange","changeName","newPhone","changePhone","type","Person","person","handleDeletePerson","name","phone","onClick","Persons","filter","persons","term","searchTerm","trim","toLowerCase","includes","map","key","showPersons","Filter","changeFilter","NotificationType","Object","freeze","SUCCESS","Symbol","INFO","ERROR","Notification","notification","notificationStyle","fontSize","borderStyle","borderRadius","padding","marginBottom","color","background","style","message","baseUrl","axios","get","then","response","console","log","data","catch","err","Promise","reject","newPerson","post","editedPerson","put","id","removablePerson","delete","App","useState","setPersons","setNewName","setNewPhone","setNewFilter","setNotification","timer","setTimer","useEffect","getAllPersons","displayNotification","clearTimeout","setTimeout","personService","error","event","target","preventDefault","existingPerson","find","personExists","personToAdd","personToUpdate","window","confirm","returnedPerson","errorMessage","status","concat","personToDelete","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b07eb95a.chunk.js","sourcesContent":["import React from 'react';\n\nconst PersonForm = (props) => {\n  return (\n    <form onSubmit={props.handleAddPerson}>\n      <div>\n        name: <input placeholder='Jane Doe' value={props.newName} onChange={props.changeName} />\n      </div>\n      <div>\n        number: <input placeholder='555-867-5309' value={props.newPhone} onChange={props.changePhone} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;","import React from 'react';\n\nconst Person = ({ person, handleDeletePerson }) => {\n  return (\n    <div>\n      {person.name} {person.phone} <button onClick={handleDeletePerson(person)}>delete</button>\n    </div>\n  );\n};\n\nexport default Person;","import React from 'react';\nimport Person from './Person';\n\nconst Persons = ({ filter, persons, handleDeletePerson }) => {\n  // case-insensitive filter\n  const filterPersons = (term) => {\n    return persons.filter((person) => {\n      return person.name.toLowerCase().includes(term.toLowerCase());\n    });\n  };\n\n  const showPersons = () => {\n    const searchTerm = filter.trim();\n    const personsToShow = searchTerm ? filterPersons(searchTerm) : persons;\n    return personsToShow.map((person) => {\n      return (\n        <Person \n          key={person.name} \n          person={person} \n          handleDeletePerson={handleDeletePerson} />\n      );\n    });\n  };\n\n  return (\n    <div>{showPersons()}</div>\n  );\n};\n\nexport default Persons;","import React from 'react';\n\nconst Filter = ({ filter, changeFilter }) => {\n  return (\n    <div>\n      filter shown with <input value={filter} onChange={changeFilter} />\n    </div>\n  );\n};\n\nexport default Filter;","import React from 'react';\n\nexport const NotificationType = Object.freeze({\n  SUCCESS: Symbol(\"success\"),\n  INFO: Symbol(\"info\"),\n  ERROR: Symbol(\"error\")\n});\n\nconst Notification = ({ notification }) => {\n  if (notification === null) {\n    return null;\n  }\n\n  let notificationStyle = {\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 15\n  };\n\n  if (notification.type === NotificationType.SUCCESS) {\n    notificationStyle.color = 'green';\n    notificationStyle.background = 'lightgreen';\n  } else if (notification.type === NotificationType.ERROR) {\n    notificationStyle.color = 'crimson';\n    notificationStyle.background = 'pink';\n  } else if (notification.type === NotificationType.INFO) {\n    notificationStyle.color = 'gold';\n    notificationStyle.background = 'lightyellow';\n  }\n\n  return (\n    <div style={notificationStyle}>\n      {notification.message}\n    </div>\n  );\n};\n\nexport default Notification;","import axios from 'axios';\n\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n  return (\n    axios\n      .get(baseUrl)\n      .then((response) => {\n        console.log('get all persons successful');\n        console.log('response data', response.data);\n        return response.data;\n      })\n      .catch((err) => {\n        console.log('err response:', err.response);\n        return Promise.reject(err.response);\n      })\n  );\n};\n\nconst createPerson = (newPerson) => {\n  return (\n    axios\n      .post(baseUrl, newPerson)\n      .then((response) => {\n        console.log('create person successful');\n        console.log('response data', response.data);\n        return response.data;\n      })\n      .catch((err) => {\n        console.log('err response:', err.response);\n        return Promise.reject(err.response);\n      })\n  );\n};\n\nconst updatePerson = (editedPerson) => {\n  return (\n    axios\n      .put(`${baseUrl}/${editedPerson.id}`, editedPerson)\n      .then((response) => {\n        console.log('update person successful');\n        console.log('response data', response.data);\n        return response.data;\n      })\n      .catch((err) => {\n        console.log('err response:', err.response);\n        return Promise.reject(err.response);\n      })\n  );\n}\n\nconst deletePerson = (removablePerson) => {\n  return (\n    axios\n      .delete(`${baseUrl}/${removablePerson.id}`)\n      .then((response) => {\n        console.log('delete person successful');\n        console.log('response data', response.data);\n        return response.data;\n      })\n      .catch((err) => {\n        console.log('err response:', err.response);\n        return Promise.reject(err.response);\n      })\n  );\n};\n\nexport default {\n  getAll,\n  createPerson,\n  updatePerson,\n  deletePerson\n};","import React, { useState, useEffect } from 'react';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport Filter from './components/Filter';\nimport Notification, { NotificationType } from './components/Notification';\nimport personService from './services/persons';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newPhone, setNewPhone] = useState('');\n  const [filter, setNewFilter] = useState('');\n  const [notification, setNotification] = useState(null);\n  const [timer, setTimer] = useState(null);\n\n  useEffect(() => {\n    getAllPersons();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const displayNotification = (type, message) => {\n    setNotification({\n      type: type,\n      message: message\n    });\n    clearTimeout(timer);\n    setTimer(\n      setTimeout(() => {\n        setNotification(null);\n      }, 5000)\n    );\n  };\n\n  const getAllPersons = () => {\n    personService\n      .getAll()\n      .then((persons) => {\n        setPersons(persons);\n      })\n      .catch((error) => {\n        console.log('get all persons error:', error);\n        displayNotification(\n          NotificationType.ERROR,\n          'Could not get persons from the server.'\n        );\n      });\n  };\n\n  const personExists = (name) => {\n    return persons.find((person) => {\n      return person.name.toLowerCase() === name.toLowerCase();\n    });\n  };\n\n  const addPerson = (personToAdd) => {\n    personService\n      .createPerson(personToAdd)\n      .then((returnedPerson) => {\n        setPersons(persons.concat(returnedPerson));\n        displayNotification(\n          NotificationType.SUCCESS, \n          `${returnedPerson.name} was successfully added to the server.`\n        );\n      })\n      .catch((error) => {\n        console.log('add person error:', error);\n        let errorMessage = `${personToAdd.name} could not be added to the server.`;\n        if (error.data.error) {\n          errorMessage += ` ${error.data.error}`;\n        }\n        displayNotification(\n          NotificationType.ERROR,\n          errorMessage\n        )\n      });\n  }\n  \n  const updatePerson = (personToUpdate) => {\n    personService\n      .updatePerson(personToUpdate)\n      .then((returnedPerson) => {\n        setPersons(persons.map((person) => {\n          return personToUpdate.id !== person.id ? person : returnedPerson;\n        }));\n        displayNotification(\n          NotificationType.SUCCESS,\n          `${returnedPerson.name} was successfully updated on the server.`\n        );\n      })\n      .catch((error) => {\n        console.log('update person error:', error);\n        let errorMessage = '';\n        if (error.status === 404) {\n          setPersons(persons.filter((person) => {\n            return personToUpdate.id !== person.id;\n          }));\n          errorMessage += `${personToUpdate.name} could not be updated since the person does not exist on the server.`;\n        } else {\n          errorMessage += `${personToUpdate.name} could not be updated.`\n          if (error.data.error) {\n            errorMessage += ` ${error.data.error}`;\n          }\n        }\n        displayNotification(\n          NotificationType.ERROR,\n          errorMessage\n        );\n      });\n  };\n\n  const deletePerson = (personToDelete) => {\n    personService\n      .deletePerson(personToDelete)\n      .then((returnedPerson) => {\n        setPersons(persons.filter((person) => {\n          return personToDelete.id !== person.id;\n        }));\n        displayNotification(\n          NotificationType.SUCCESS,\n          `${personToDelete.name} was successfully deleted from the server.`\n        );\n      })\n      .catch((error) => {\n        console.log('delete person error:', error);\n        let errorMessage = '';\n        if (error.status === 404) {\n          setPersons(persons.filter((person) => {\n            return personToDelete.id !== person.id;\n          }));\n          errorMessage += `${personToDelete.name} was already deleted from the server.`;\n        } else {\n          errorMessage += `${personToDelete.name} could not be deleted.`;\n          if (error.data.error) {\n            errorMessage += ` ${error.data.error}`;\n          }\n        }\n        displayNotification(\n          NotificationType.ERROR,\n          errorMessage\n        );\n      });\n  };\n\n  const handleAddPerson = (event) => {\n    event.preventDefault();\n    const name = newName.trim();\n    const phone = newPhone.trim();\n    const existingPerson = personExists(name);\n    if (!name) {\n      displayNotification(\n        NotificationType.ERROR,\n        'No name was given.'\n      );\n      return;\n    }\n    if (!phone) {\n      displayNotification(\n        NotificationType.ERROR,\n        'No phone number was given.'\n      );\n      return;\n    }\n    if (existingPerson && phone === existingPerson.phone) {\n      displayNotification(\n        NotificationType.ERROR,\n        `${name} is already in the phonebook.`\n      );\n      setNewName('');\n      return;\n    } else if (existingPerson) {\n      const confirmUpdate = window.confirm(`${existingPerson.name} already exists. Replace phone number?`);\n      if (confirmUpdate) {\n        const editedPerson = {\n          ...existingPerson,\n          phone: phone\n        };\n        updatePerson(editedPerson);\n      } else {\n        displayNotification(\n          NotificationType.INFO,\n          'No update was made.'\n        );\n      }\n    } else {\n      const newPerson = {\n        name: name,\n        phone: phone\n      };\n      addPerson(newPerson);\n    }\n    setNewName('');\n    setNewPhone('');\n  };\n\n  const handleDeletePerson = (person) => {\n    return (() => {\n      const confirmDelete = window.confirm(`Delete ${person.name}?`);\n      if (confirmDelete) {\n        const removablePerson = {\n          ...person\n        };\n        deletePerson(removablePerson);\n      } else {\n        displayNotification(\n          NotificationType.INFO,\n          'No person was deleted.'\n        );\n      }\n    });\n  };\n\n  const changeName = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const changePhone = (event) => {\n    setNewPhone(event.target.value);\n  };\n\n  const changeFilter = (event) => {\n    setNewFilter(event.target.value);\n  };\n  \n  return (\n    <div>\n        <h2>Phonebook</h2>\n        <Notification notification={notification} />\n        <Filter filter={filter} changeFilter={changeFilter} />\n        <h3>add new contact</h3>\n        <PersonForm\n          handleAddPerson={handleAddPerson}\n          newName={newName}\n          changeName={changeName}\n          newPhone={newPhone}\n          changePhone={changePhone} />\n        <h2>Numbers</h2>\n        <Persons \n          filter={filter} \n          persons={persons} \n          handleDeletePerson={handleDeletePerson} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}